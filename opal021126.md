
Here is a comprehensive, highly detailed prompt designed for use in AI development environments like Google AI Studio, OPAL, or Firebase Studio. It targets a word count between 2000-3000 words by including rigorous architectural definitions, full file structures, design system constants, and sophisticated agentic logic.
Master Prompt: FDA 510(k) Agentic Reviewer (v2.0)
Role: Expert Full-Stack Software Architect, Senior UI/UX Designer (High-Fashion Specialization), and AI Systems Engineer.
Objective:
Construct a production-grade, Single-Page Application (SPA) using React 19, TypeScript, Vite, and Tailwind CSS. The application is the FDA 510(k) Agentic Reviewer v2.0. It is a unique hybrid of a rigorous regulatory compliance tool and a high-end fashion interface. It must integrate Google Gemini (Models 2.5 and 3.0) to perform agentic regulatory tasks while allowing the user to hot-swap visual themes inspired by iconic fashion houses.
Context:
Regulatory professionals suffer from "reviewer fatigue." This app solves this via two mechanisms:
Cognitive Offloading: Using AI to parse, verify, and orchestrate FDA 510(k) submissions.
Visual Stimulation: A "Jackslot" gamification engine that randomizes high-fidelity UI themes to reduce eye strain and increase delight.
Part 1: Technical Stack & Architecture Guidelines
You are required to build the application with the following constraints and choices:
Framework: Vite (React 19 + TypeScript).
Styling: Tailwind CSS (via PostCSS) combined with a Dynamic CSS Variable Injection Strategy for theming.
State Management: React Context API + Hooks (no Redux).
Animation: framer-motion for complex page transitions and the "Jackslot" mechanic.
Icons: lucide-react.
Data Visualization: recharts for the Analytics Dashboard.
AI Integration: Google Generative AI SDK (@google/genai).
Validation: zod for runtime schema validation of AI outputs.
Global Design Philosophy ("The Fashion-First System")
The application must not look like a standard dashboard. It must look like an interactive art piece.
Glassmorphism: Extensive use of backdrop-blur, semi-transparent whites/blacks, and subtle borders.
Typography: Dynamic font loading. Inter for data, Playfair Display for headers (configurable per theme).
Ambient Backgrounds: The background must contain animated "blobs" or gradients that shift colors based on the active theme.
Part 2: The Three New AI Features (The "Agentic Plus" Update)
In addition to the core spec, you must implement three advanced AI features inspired by technical scalability and compliance requirements.
Feature A: The "Truth-Grounding" Auditor (Hallucination Defense)
Concept: A secondary agent step that runs immediately after the primary parsing.
Mechanism:
The primary agent parses the FDA summary.
The Auditor Agent takes the parsed JSON and scans the "Predicates" section.
It validates K-numbers against a regex pattern (K\d{6}) and cross-references a mocked internal database of known devices.
It assigns a "Confidence Score" (0-100%) to the parsed data.
UI Impact: A "Verification Badge" appears on the dashboard. If the score is <90%, it glows amber.
Feature B: Multimodal Visual Evidence Extractor
Concept: FDA submissions rely on biomechanical drawings. Text-only parsing is insufficient.
Mechanism:
Add a drag-and-drop zone in SummaryStudio.
Allow users to upload an image (simulated Diagram/Chart).
Use Gemini 2.5 Flash (Multimodal) to analyze the image.
The Agent must generate a caption and compare it to the "Device Description" text to ensure consistency.
UI Impact: A "Visual Evidence" card in the dashboard showing the image and the AI's analysis.
Feature C: The Immutable Audit Ledger (Compliance)
Concept: To satisfy 21 CFR Part 11 requirements, every AI interaction must be logged.
Mechanism:
Create an AuditContext.
Every time the user sends a prompt or the AI returns a JSON, generate a SHA-256 hash (simulated) of the content.
Store this in an append-only array: { timestamp, action, hash, modelVersion }.
UI Impact: A dedicated "Compliance Log" view accessible via the Sidebar, styled like a receipt or a ledger.
Part 3: Step-by-Step Implementation Plan
Generate the application code following this exact file structure and logic sequence.
1. Project Scaffolding & Configuration
tailwind.config.js
Define the color palette to rely entirely on CSS variables. Do not hardcode hex values here.
code
JavaScript
export default {
  content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
  theme: {
    extend: {
      colors: {
        brand: {
          primary: "var(--color-primary)",
          secondary: "var(--color-secondary)",
          accent: "var(--color-accent)",
          surface: "var(--color-surface)",
          text: "var(--color-text)",
          muted: "var(--color-muted)",
        },
      },
      fontFamily: {
        primary: ["var(--font-primary)", "sans-serif"],
        secondary: ["var(--font-secondary)", "serif"],
      },
    },
  },
  plugins: [],
};
2. The Core Data Layer (Types & Constants)
src/types.ts
Define the Zod schemas and TypeScript interfaces.
K510Summary: (K Number, Product Code, Device Desc, Predicates, Risks).
AuditLogEntry: (Timestamp, Action, Hash, Metadata).
ThemeConfig: (Name, Colors object, Font choices).
src/constants.ts
Implement the 20 Fashion Styles.
Orange Box: Primary #F37021, Secondary #FFFFFF, Font Playfair Display.
Noir & Blanc: Primary #000000, Secondary #FFFFFF, Accent #CCCCCC.
Flora: Primary #2E5C55, Secondary #F2D1A8, Accent #D66D75.
Red Sole: Primary #000000, Secondary #FFFFFF, Accent #E60000.
(Create 16 others with distinct psychological vibes: Cyberpunk, Tiffany, Trench, Structural, etc.)
Include the Language Dictionary for English/Traditional Chinese toggling.
3. State Management & Services
src/services/geminiService.ts
Implement the AI logic.
parseSummary(text): Uses Gemini 2.5 Flash. System Prompt must strictly enforce JSON output. Use zod to validate the response.
verifyData(json): The Auditor Agent. Checks for specific keywords and regex patterns.
analyzeImage(base64): The Multimodal Agent.
generatePlan(context): The Orchestrator. Uses Gemini 3.0 Pro (mocked if necessary) for complex reasoning.
src/context/AppContext.tsx
Manage global state:
activeTheme (Current Style Object).
language ('en' | 'zh-TW').
auditLog (Array of interactions).
userSettings (API Key storage - Note: Store in memory only for security).
src/hooks/useThemeRandomizer.ts
Implement the "Jackslot" Logic.
Function spin(): Uses setInterval to cycle through the THEMES array every 100ms for 2 seconds.
On every tick, update the CSS variables on document.documentElement.
End on a random theme.
4. UI Components Implementation
src/components/Sidebar.tsx
Visuals: Glassmorphism (bg-white/10 backdrop-blur-md).
Jackslot Trigger: A button with a dice or slot icon. When clicked, it triggers the spin() hook. The icon should rotate using framer-motion during the spin.
Navigation: Dashboard, Summary Studio, Orchestrator, Compliance Log.
Settings: Toggle Language (EN/ZH), API Key Input (masked).
src/components/Dashboard.tsx
Charts: Use Recharts.
Token Usage: Bar chart showing consumption.
Throughput: Line chart.
Crucial: The charts must use fill="var(--color-primary)" so they change color instantly when the theme changes.
Cards: "Review Velocity", "Pending Risks".
src/components/SummaryStudio.tsx (The Main Feature)
Layout: Split screen (Resizable).
Left: Input Area (Textarea + Image Dropzone).
Right: Tabbed View (Visual Dashboard / Chat).
Visual Dashboard:
Render the parsed K510Summary as a beautiful grid of cards.
Feature A Integration: Display the "Auditor Verification Badge" prominently.
Feature B Integration: Display the analyzed image and caption if present.
Chat Interface:
RAG Implementation: Inject the parsed JSON into the chat context.
Allow the user to ask: "What is the predicate device?"
src/components/Orchestrator.tsx
Input: "Device Description" (High level).
Action: Trigger generatePlan.
Output: Render Markdown of the generated plan (Step-by-step submission strategy).
Style: Render as a timeline or Gantt-style list.
src/components/ComplianceLog.tsx (Feature C)
A table view displaying the auditLog.
Columns: Timestamp, Agent Name, Action, SHA-256 Hash.
Visual Style: Monospaced font (Courier New or similar) to look like a terminal or printed receipt.
src/App.tsx
Setup the useEffect to listen to activeTheme changes and apply the CSS variables to :root.
Render the AmbientBackground component (a large, blurred, animated div that moves slowly behind the app, inheriting var(--color-accent)).
Part 4: Detailed Code Instructions & Prompting
When generating the code, please adhere to the following specific patterns.
A. The "Jackslot" Engine Pattern
The randomization engine must be smooth. Use this logic for the hook:
code
TypeScript
// src/hooks/useThemeRandomizer.ts
import { useState, useCallback } from 'react';
import { THEMES } from '../constants';

export const useThemeRandomizer = () => {
  const [isSpinning, setIsSpinning] = useState(false);

  const applyTheme = (theme: ThemeConfig) => {
    const root = document.documentElement;
    root.style.setProperty('--color-primary', theme.colors.primary);
    root.style.setProperty('--color-secondary', theme.colors.secondary);
    root.style.setProperty('--color-accent', theme.colors.accent);
    root.style.setProperty('--font-primary', theme.font.primary);
    // ... apply all variables
  };

  const spin = useCallback(() => {
    setIsSpinning(true);
    let duration = 0;
    const interval = setInterval(() => {
      const randomTheme = THEMES[Math.floor(Math.random() * THEMES.length)];
      applyTheme(randomTheme);
      duration += 100;
      if (duration >= 2000) {
        clearInterval(interval);
        setIsSpinning(false);
      }
    }, 100);
  }, []);

  return { spin, isSpinning };
};
B. The Gemini Service & Zod Validation Pattern
Do not simply return text. You must attempt to parse JSON.
code
TypeScript
// src/services/geminiService.ts
import { GoogleGenerativeAI } from "@google/genai";
import { z } from "zod";

// Define Schema for Validation
const SummarySchema = z.object({
  kNumber: z.string(),
  productCode: z.string(),
  deviceDescription: z.string(),
  predicates: z.array(z.object({ device: z.string(), kNumber: z.string() })),
  riskAssessment: z.array(z.object({ hazard: z.string(), mitigation: z.string() })),
});

export const parse510kSummary = async (text: string, apiKey: string) => {
  const genAI = new GoogleGenerativeAI(apiKey);
  const model = genAI.getGenerativeModel({ model: "gemini-2.0-flash" }); // Use latest model

  const prompt = `
    Analyze the following FDA 510(k) text.
    Extract the data into a JSON object matching this structure:
    {
      "kNumber": "...",
      "productCode": "...",
      "deviceDescription": "...",
      "predicates": [{ "device": "...", "kNumber": "..." }],
      "riskAssessment": [{ "hazard": "...", "mitigation": "..." }]
    }
    Text: ${text}
  `;

  const result = await model.generateContent(prompt);
  const response = result.response;
  const textOutput = response.text();

  // Strip Markdown code blocks if present
  const jsonString = textOutput.replace(/```json/g, "").replace(/```/g, "");

  try {
    const parsed = JSON.parse(jsonString);
    // Runtime Validation
    return SummarySchema.parse(parsed);
  } catch (error) {
    console.error("AI Parsing Failed", error);
    throw new Error("Failed to extract structured data.");
  }
};
Part 5: Execution Instructions for the AI Developer
Please proceed to generate the application in the following order:
Environment Setup: Create the detailed package.json with all dependencies (framer-motion, clsx, tailwind-merge, recharts, @google/genai, zod, lucide-react).
Styles & Constants: Create constants.ts with the full array of 20 themes. This is critical for the "WOW" factor. Create the tailwind.config.js.
State Layer: Build AppContext and useThemeRandomizer.
Service Layer: Build geminiService.ts including the Auditor and Multimodal logic.
Components: Build the Sidebar, Dashboard, and SummaryStudio.
Integration: Assemble App.tsx.
Critical Requirement:
Ensure the UI code uses the CSS variables (e.g., bg-brand-primary) rather than hardcoded colors. If this is not done, the "Jackslot" feature will fail to visually update the app.
Tone of Voice for the UI:
The text inside the application should be professional but elevated. Instead of "Loading...", use "Agent Orchestrating...". Instead of "Settings", use "Configuration Atelier".
Compliance Note:
Include comments in the code indicating where Data Privacy measures (21 CFR Part 11) would theoretically be implemented in a real backend (e.g., "TODO: Encrypt before persisting").
Detailed File Specifications (for Context)
1. src/constants.ts (The Design System)
Function: Holds the 20 theme definitions and localization strings.
Requirement: Define THEMES as an array of objects. Each object has id, name, colors (primary, secondary, accent, surface, text), and fonts.
Requirement: Define LABELS object with keys for en and zh-TW. Example: dashboard: { en: "Dashboard", zh: "儀表板" }.
2. src/components/SummaryStudio/Visualizer.tsx
Function: Renders the parsed JSON.
Design: Use a Masonry grid layout.
Agent Integration:
If verificationScore < 0.9, render an AlertBanner at the top of the component.
If risks array is empty, show a "Gap Analysis" warning suggesting the AI missed the risk section.
3. src/components/SummaryStudio/ChatPanel.tsx
Function: Chat interface.
State: Local array of messages { role: 'user' | 'model', content: string }.
Logic: When sending a message, append the current k510Data as a hidden system instruction to enable RAG.
4. src/components/ComplianceLog.tsx
Function: Displays the "Immutable Audit Ledger".
Data Source: auditLog from AppContext.
Visuals: Dark mode terminal aesthetic by default, or "Receipt" style (white background, mono font) if the theme is "Trench" or "Noir".
Final Prompt to the AI Generator:
"Create the FDA 510(k) Agentic Reviewer v2.0 application based on the detailed architecture above. Start by defining the file structure and the package.json. Then, implement the core constants.ts with the 20 fashion themes. Following that, build the geminiService.ts with the three specific AI features (Parser, Auditor, Multimodal). Finally, construct the React components, ensuring the 'Jackslot' mechanism correctly injects CSS variables into the root to achieve the dynamic theming effect. Ensure all code is strictly TypeScript and uses Tailwind CSS for styling."
Explanation of AI Features Added
The Auditor Agent (Truth-Grounding): This directly addresses the follow-up question regarding Hallucination Handling. By creating a secondary step that validates the output of the first step (specifically regex-checking K-numbers), we introduce a "Human-in-the-loop" simulation that increases trust.
Multimodal Visual Extractor: This addresses the follow-up question regarding Multimodal Inputs. FDA submissions are rarely text-only. Adding the ability to ingest diagrams and having the AI "see" them to cross-reference text claims transforms the tool from a text-processor to a true reviewer.
Immutable Audit Ledger: This addresses the follow-up questions regarding Audit Trails and Regulatory Compliance. By hashing every interaction, the software moves closer to being "Validation Ready" for enterprise use, simulating a blockchain-like integrity check.
